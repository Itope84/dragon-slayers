!function(t){"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}(function(t){return function(){var i,o,e=Math.max,n=Math.abs,l=Math.round,f=/left|center|right/,s=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,r=/^\w+/,p=/%$/,c=t.fn.position;function a(t,i,o){return[parseFloat(t[0])*(p.test(t[0])?i/100:1),parseFloat(t[1])*(p.test(t[1])?o/100:1)]}function d(i,o){return parseInt(t.css(i,o),10)||0}o=function(){var i=t("<div>").css("position","absolute").appendTo("body").offset({top:1.5,left:1.5}),e=1.5===i.offset().top;return i.remove(),o=function(){return e},e},t.position={scrollbarWidth:function(){if(void 0!==i)return i;var o,e,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),l=n.children()[0];return t("body").append(n),o=l.offsetWidth,n.css("overflow","scroll"),o===(e=l.offsetWidth)&&(e=n[0].clientWidth),n.remove(),i=o-e},getScrollInfo:function(i){var o=i.isWindow||i.isDocument?"":i.element.css("overflow-x"),e=i.isWindow||i.isDocument?"":i.element.css("overflow-y"),n="scroll"===o||"auto"===o&&i.width<i.element[0].scrollWidth;return{width:"scroll"===e||"auto"===e&&i.height<i.element[0].scrollHeight?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(i){var o=t(i||window),e=t.isWindow(o[0]),n=!!o[0]&&9===o[0].nodeType;return{element:o,isWindow:e,isDocument:n,offset:!e&&!n?t(i).offset():{left:0,top:0},scrollLeft:o.scrollLeft(),scrollTop:o.scrollTop(),width:o.outerWidth(),height:o.outerHeight()}}},t.fn.position=function(i){if(!i||!i.of)return c.apply(this,arguments);i=t.extend({},i);var p,g,u,m,w,W,v,y,H=t(i.of),b=t.position.getWithinInfo(i.within),T=t.position.getScrollInfo(b),x=(i.collision||"flip").split(" "),L={};return W=9===(y=(v=H)[0]).nodeType?{width:v.width(),height:v.height(),offset:{top:0,left:0}}:t.isWindow(y)?{width:v.width(),height:v.height(),offset:{top:v.scrollTop(),left:v.scrollLeft()}}:y.preventDefault?{width:0,height:0,offset:{top:y.pageY,left:y.pageX}}:{width:v.outerWidth(),height:v.outerHeight(),offset:v.offset()},H[0].preventDefault&&(i.at="left top"),g=W.width,u=W.height,m=W.offset,w=t.extend({},m),t.each(["my","at"],function(){var t,o,e=(i[this]||"").split(" ");1===e.length&&(e=f.test(e[0])?e.concat(["center"]):s.test(e[0])?["center"].concat(e):["center","center"]),e[0]=f.test(e[0])?e[0]:"center",e[1]=s.test(e[1])?e[1]:"center",t=h.exec(e[0]),o=h.exec(e[1]),L[this]=[t?t[0]:0,o?o[0]:0],i[this]=[r.exec(e[0])[0],r.exec(e[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===i.at[0]?w.left+=g:"center"===i.at[0]&&(w.left+=g/2),"bottom"===i.at[1]?w.top+=u:"center"===i.at[1]&&(w.top+=u/2),p=a(L.at,g,u),w.left+=p[0],w.top+=p[1],this.each(function(){var f,s,h=t(this),r=h.outerWidth(),c=h.outerHeight(),W=d(this,"marginLeft"),v=d(this,"marginTop"),y=r+W+d(this,"marginRight")+T.width,P=c+v+d(this,"marginBottom")+T.height,D=t.extend({},w),I=a(L.my,h.outerWidth(),h.outerHeight());"right"===i.my[0]?D.left-=r:"center"===i.my[0]&&(D.left-=r/2),"bottom"===i.my[1]?D.top-=c:"center"===i.my[1]&&(D.top-=c/2),D.left+=I[0],D.top+=I[1],o()||(D.left=l(D.left),D.top=l(D.top)),f={marginLeft:W,marginTop:v},t.each(["left","top"],function(o,e){t.ui.position[x[o]]&&t.ui.position[x[o]][e](D,{targetWidth:g,targetHeight:u,elemWidth:r,elemHeight:c,collisionPosition:f,collisionWidth:y,collisionHeight:P,offset:[p[0]+I[0],p[1]+I[1]],my:i.my,at:i.at,within:b,elem:h})}),i.using&&(s=function(t){var o=m.left-D.left,l=o+g-r,f=m.top-D.top,s=f+u-c,p={target:{element:H,left:m.left,top:m.top,width:g,height:u},element:{element:h,left:D.left,top:D.top,width:r,height:c},horizontal:l<0?"left":o>0?"right":"center",vertical:s<0?"top":f>0?"bottom":"middle"};g<r&&n(o+l)<g&&(p.horizontal="center"),u<c&&n(f+s)<u&&(p.vertical="middle"),e(n(o),n(l))>e(n(f),n(s))?p.important="horizontal":p.important="vertical",i.using.call(this,t,p)}),h.offset(t.extend(D,{using:s}))})},t.ui.position={fit:{left:function(t,i){var o,n=i.within,l=n.isWindow?n.scrollLeft:n.offset.left,f=n.width,s=t.left-i.collisionPosition.marginLeft,h=l-s,r=s+i.collisionWidth-f-l;i.collisionWidth>f?h>0&&r<=0?(o=t.left+h+i.collisionWidth-f-l,t.left+=h-o):t.left=r>0&&h<=0?l:h>r?l+f-i.collisionWidth:l:h>0?t.left+=h:r>0?t.left-=r:t.left=e(t.left-s,t.left)},top:function(t,i){var o,n=i.within,l=n.isWindow?n.scrollTop:n.offset.top,f=i.within.height,s=t.top-i.collisionPosition.marginTop,h=l-s,r=s+i.collisionHeight-f-l;i.collisionHeight>f?h>0&&r<=0?(o=t.top+h+i.collisionHeight-f-l,t.top+=h-o):t.top=r>0&&h<=0?l:h>r?l+f-i.collisionHeight:l:h>0?t.top+=h:r>0?t.top-=r:t.top=e(t.top-s,t.top)}},flip:{left:function(t,i){var o,e,l=i.within,f=l.offset.left+l.scrollLeft,s=l.width,h=l.isWindow?l.scrollLeft:l.offset.left,r=t.left-i.collisionPosition.marginLeft,p=r-h,c=r+i.collisionWidth-s-h,a="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,d="left"===i.at[0]?i.targetWidth:"right"===i.at[0]?-i.targetWidth:0,g=-2*i.offset[0];p<0?((o=t.left+a+d+g+i.collisionWidth-s-f)<0||o<n(p))&&(t.left+=a+d+g):c>0&&((e=t.left-i.collisionPosition.marginLeft+a+d+g-h)>0||n(e)<c)&&(t.left+=a+d+g)},top:function(t,i){var o,e,l=i.within,f=l.offset.top+l.scrollTop,s=l.height,h=l.isWindow?l.scrollTop:l.offset.top,r=t.top-i.collisionPosition.marginTop,p=r-h,c=r+i.collisionHeight-s-h,a="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,d="top"===i.at[1]?i.targetHeight:"bottom"===i.at[1]?-i.targetHeight:0,g=-2*i.offset[1];p<0?((e=t.top+a+d+g+i.collisionHeight-s-f)<0||e<n(p))&&(t.top+=a+d+g):c>0&&((o=t.top-i.collisionPosition.marginTop+a+d+g-h)>0||n(o)<c)&&(t.top+=a+d+g)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position});